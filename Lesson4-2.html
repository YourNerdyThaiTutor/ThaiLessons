<!doctype html>
<html lang="en">
    <head>
        <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BQ56JZ1LM4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-BQ56JZ1LM4');
</script>
        <meta charset="utf-8" />
        <title>Mid tones Typing</title>
        <link rel="stylesheet" href="styles.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2893492306157134"
     crossorigin="anonymous"></script>
        
    </head>

    <body>
        <a href="https://yournerdythaitutor.github.io/"> home</a>
        <div id="score" class="score">Score: </div>
        <div id="streak" class="streak">Streak: </div>
        <div id="question" class="question">
            <!--button class="selectedOption">mid</!--button><button class = "options">single</button><button class="options">paired</button><br><br---><br>
        <img src="images/audio%20still.png">
            <audio controls id="audio">
                <source id="audioSource" src="mid/กอ.mp3" type="audio/mp3">
                Your browser does not support the audio tag.
            </audio>
            
            
        </div>
        <div class="helper">
            <button id="helper" class="options" onclick="location.href='https://yournerdythaitutor.github.io/ThaiKeyboard.html?product=ง,ม,ย,ว,น';">click here to see where the ending consonants are</button>
        </div>
        
        <div id="answers" class="answers">
            <p>Type in the correct vowel</p>
            <input id="numb">
            <button id="myBtn" onclick="SubmitAnswer()" type="button">Submit</button>
            
        </div>
            <script>
                var consonants =["ก","จ","ด","ต","บ","ป","อ"]; //middle consonants
var single_low_consonants = ["ง","ญ","น","ย","ณ","ร","ว","ม","ฬ","ล"];
var paired_low_consonants = ["ค","ช","ซ","ท","พ","ฟ","ฮ"];//simple consonants no repeeated sounds
var paired_high_consonants = ["ข","ฉ","ส","ถ","ผ","ฝ","ห"];
var tones =["","่","้","๊","๋"];
var vowels =["า","อ"];
var choices = ["กาง","กาย","กาว","แกง","แกน","โกง","โกน","จาง","จาน","จาม","จึน","จูง","แจว","ดาว","แดน","โดน","ตาม","ตีน","บาง","บาน","ปูน","อาน","เอน"];
var correct ="";
var score = 0;
var alreadyWrong = false;
var streak = 0;

var input = document.getElementById("numb");
    input.addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            document.getElementById("myBtn").click();
        }
    });

function checkAnswer(txt){
    
    
    if(txt === correct){
        //var t = document.createTextNode("correct");
        //document.body.appendChild(t);
        document.getElementById("myBtn").style.background='#00ff00';
        if(!alreadyWrong){
            score ++;
            streak ++;
            document.getElementById("score").textContent = "Score: "+score;
            document.getElementById("streak").textContent = "Streak: "+streak;
        }
        else{
            streak = 0;
            document.getElementById("streak").textContent = "Streak: "+streak;
        }
        alreadyWrong = false;
        setTimeout(() => startGame(),700);
        
    }
    else{
        //var ti = document.createTextNode("wrong");
        //document.body.appendChild(ti);
        document.getElementById("myBtn").style.background='#ff3333';
        alreadyWrong = true;
    }
}
function createQuestion(){
    var correctIndex = Math.floor(Math.random() * choices.length);
    correct = choices[correctIndex];
     var src = "./spelling_audios/"+correct+".mp3";
    
    var audio = document.getElementById('audio');

    var source = document.getElementById('audioSource');
    source.src = src;
    audio.load();
    audio.play();
    //var t = document.createTextNode(src);
    //document.body.appendChild(t);
}

function SubmitAnswer() {
  // Get the value of the input field with id="numb"
  let x = document.getElementById("numb").value;
    document.getElementById("numb").focus();
    document.getElementById("numb").select();
  // If x is Not a Number or less than one or greater than 10
   x.replace(/\s/g, '');
   checkAnswer(x);
}

function startGame(){
    document.getElementById("numb").focus();
    document.getElementById("numb").select();
    document.getElementById("myBtn").style.background='#ffffff';
    createQuestion();
}

window.onload = function start(){startGame();}

            </script>
        
    </body>
</html>
